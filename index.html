<!doctype html>
<html>
<head>
  <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A simple example of push notifications working in a Service Worker">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Push Demo</title>
    <!-- Roboto and Roboto Condensed Fonts -->
    <link href='//fonts.googleapis.com/css?family=Roboto:400,300,500,700|Roboto+Condensed:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="styles/h5bp.css">
    <link rel="stylesheet" type="text/css" href="styles/main.css">
  <link rel="manifest" href="manifest.json">
  <script>
  
  'use strict';

var PUSH_SERVER_URL = window.location.origin;

var notificationElements;
var pushPermissionElements;
var requestPushElements;
var revokePushElements;
var pushBtn;
var notificationBtn;
var requestPushBtn;
var revokePushBtn;
var pushTitleInput;
var pushMessageInput;

var STATE_NOTIFICATION_PERMISSION = 0;
var STATE_PUSH_PERMISSION = 1;
var STATE_ALLOW_PUSH_SEND = 2;

var currentState = STATE_NOTIFICATION_PERMISSION;

/**
 *
 * These methods are specific to setting up the UI
 *
 */
function prepareViews() {
  notificationElements = document.querySelector('#notification-permission');
  pushPermissionElements = document.querySelector('#push-permission');
  requestPushElements = document.querySelector('#request-push');
  revokePushElements = document.querySelector('#revoke-push');

  notificationBtn = notificationElements.querySelector('button');
  pushBtn = pushPermissionElements.querySelector('button');
  requestPushBtn = requestPushElements.querySelector('button');
  revokePushBtn = revokePushElements.querySelector('button');

  pushTitleInput = requestPushElements.querySelector('.title');
  pushMessageInput = requestPushElements.querySelector('.message');
}

function requestNotificationPermission() {
 
  console.log('Permission wasn\'t granted. Allow a retry.');
}
window.addEventListener('load', function() {
  prepareViews();
  notificationBtn.addEventListener('click', requestNotificationPermission);
  pushBtn.addEventListener('click', requestPushPermission);
  requestPushBtn.addEventListener('click', askServerToSendMessage);
  revokePushBtn.addEventListener('click', revokePushSubscription);
});  
  
  </script>
 </head>
<body>
      <main>
      <section >
        <div class="button-group" id="notification-permission">
          <p><span>1</span>Enable notifications</p>
          <button enabled>Request Notifcation Permissions</button>
        </div>

        <div class="button-group enabled" id="push-permission">
          <p><span>2</span>Enable push for this site</p>
          <button enabled>Request Push Permissions</button>
        </div>

        <div class="button-group enabled" id="request-push">
          <p><span>3</span>Send yourself a push message</p>
          <input type="text" class="title" placeholder="Title" />
          <input type="text" class="message" placeholder="Message" />
          <button enabled>Request a Push to Yourself</button>
        </div>

        <div class="button-group enabled" id="revoke-push">
          <p><span>4</span>Disable push for this site</p>
          <button enabled>Revoke Push Permissions</button>
        </div>
      </section>
      <section class="error-container">
        <h1 class="title">Ooops</h1>
        <p class="message">Something went wrong</p>
      </section>
    </main>
</body>
</html>

